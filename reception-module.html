<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fresh Produce ERP - Réception</title>
    <!-- Use Tailwind CSS and the custom stylesheet -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide icons for a clean look -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="styles.css">

</head>
<body class="bg-gray-100 font-sans text-gray-900">
    <!-- Sidebar for Main Navigation - Identical to the dashboard -->
    <aside class="sidebar p-4">
        <div class="text-2xl font-bold text-gray-800 mb-8 flex items-center gap-2">
            <span class="text-green-500">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-apple"><path d="M12 20.94a1.8 1.8 0 0 1-2.48.51c-1.39-1.2-2.18-2.6-3.13-4C5.17 14.76 4 13.11 4 11a4 4 0 0 1 8-2 4 4 0 0 1 8 2c0 2.11-1.17 3.76-2.39 5.45-1 1.39-1.79 2.79-3.13 4a1.8 1.8 0 0 1-2.48-.51z"/><path d="M10 2v3a1 1 0 0 1-2 0V2"/></svg>
            </span>
            <span>ERP System</span>
        </div>
        <nav>
            <ul>
                <li><a href="index.html" class="module-link rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"/><polyline points="14 2 14 8 20 8"/><path d="M10 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/><path d="M7 16.5v4.5"/><path d="M13 16.5v4.5"/></svg>
                    Dashboard
                </a></li>
                <li><a href="reception-rcp.html" class="module-link active rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                    Réception
                </a></li>
                <li><a href="devis-comd.html" class="module-link rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    Devis et Commandes
                </a></li>
                <li><a href="stock-m.html" class="module-link rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="2" ry="2"/><path d="M12 2v20"/><path d="M2 12h20"/></svg>
                    Stock
                </a></li>
                <li><a href="palettisation-pal.html" class="module-link rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4a2 2 0 0 0 1-1.73z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" x2="12" y1="22.01" y2="12"/></svg>
                    Palettisation
                </a></li>
                <li><a href="expedition-prep.html" class="module-link rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.74 1.74"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.74-1.74"/></svg>
                    Expédition
                </a></li>
                <li><a href="ventes.html" class="module-link rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12s2-4 10-4 10 4 10 4-2 4-10 4-10-4-10-4z"/><circle cx="12" cy="12" r="3"/></svg>
                    Vente
                </a></li>
                <li><a href="qualite.html" class="module-link rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19.07 4.93a10 10 0 0 1 0 14.14m-1.39 1.39a10 10 0 0 1-14.14 0m1.39-1.39a10 10 0 0 1 14.14 0m-1.39-1.39a10 10 0 0 1 0-14.14M5 19l14-14m-14 0l14 14"/></svg>
                    Qualité
                </a></li>
                <li><a href="comptabilite.html" class="module-link rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20a8 8 0 0 1-8-8c0-5.45 4.31-9.9 9.81-10c2.42-.04 4.8.78 6.64 2.27A10.3 10.3 0 0 1 22 10"/><path d="M2 13a10.32 10.32 0 0 0 5.25 8.85c1.45.82 3.12 1.25 4.85 1.15a12.83 12.83 0 0 0 5.48-1.54"/><path d="M16 14h6"/><path d="M19 11v6"/></svg>
                    Comptabilité
                </a></li>
                <li><a href="ressourceshumaines.html" class="module-link rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon-small" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    Ressources Humaines
                </a></li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
        <header class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold text-gray-900">Réception</h1>
        </header>

        <!-- Top-level navigation for different tasks -->
        <nav class="bg-white p-4 rounded-lg card mb-6">
            <ul class="flex space-x-4">
                <li><a href="#saisie-reception" id="saisie-reception-tab" class="top-tab-link text-gray-900 font-medium hover:text-green-600 border-b-2 border-green-500">Saisie des Réceptions</a></li>
                <li><a href="#saisie-factures" id="saisie-factures-tab" class="top-tab-link text-gray-500 hover:text-gray-900 border-b-2 border-transparent">Saisie des factures</a></li>
                <li><a href="#retours" id="retours-tab" class="top-tab-link text-gray-500 hover:text-gray-900 border-b-2 border-transparent">Retours</a></li>
            </ul>
        </nav>

        <!-- Top-level content sections container -->
        <div id="tab-content-container">
            <!-- Saisie des Réceptions content section -->
            <div id="saisie-reception-content" class="tab-content">
                <div class="table-group-container grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Form: Bon de réception -->
                    <div class="bg-white p-6 rounded-lg card">
                        <table class="w-full text-sm text-left text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th scope="col" colspan="2" class="px-6 py-3 text-center">Bon de réception</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Bon de réception:</td>
                                    <td class="px-6 py-4"><input type="number" id="n-brp" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5" value="00000"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Bon de commande:</td>
                                    <td class="px-6 py-4"><input type="number" id="n-bc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Fournisseur:</td>
                                    <td class="px-6 py-4"><input type="number" id="n-frn" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Article:</td>
                                    <td class="px-6 py-4"><input type="number" id="n-artc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Poids Brut:</td>
                                    <td class="px-6 py-4"><input type="number" id="poids-br" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Tarre du véhicule:</td>
                                    <td class="px-6 py-4"><input type="number" id="tarre-vhc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Tarre de caisse:</td>
                                    <td class="px-6 py-4"><input type="number" id="tarre-csse" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Tarre de palette:</td>
                                    <td class="px-6 py-4"><input type="number" id="tarre-pal" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Nombre de caisses:</td>
                                    <td class="px-6 py-4"><input type="number" id="nbre-csse" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Nombre de palettes:</td>
                                    <td class="px-6 py-4"><input type="number" id="nbre-pal" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Poids Net:</td>
                                    <td class="px-6 py-4"><input type="number" id="poids-net" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Date de réception:</td>
                                    <td class="px-6 py-4"><input type="datetime-local" id="dte-rcp" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Matricule Véhicule:</td>
                                    <td class="px-6 py-4"><input type="text" id="matricule-vhc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Form: Fiche d'agrégation -->
                    <div class="bg-white p-6 rounded-lg card">
                        <table class="w-full text-sm text-left text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th scope="col" colspan="2" class="px-6 py-3 text-center">Fiche d'agrégation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Agrégation:</td>
                                    <td class="px-6 py-4"><input type="text" id="n-agr" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5" value="0000"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Bon de réception:</td>
                                    <td class="px-6 py-4"><input type="text" id="n-brp-agr" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Quantité Agrée(kg):</td>
                                    <td class="px-6 py-4"><input type="text" id="qnt-agr" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Article:</td>
                                    <td class="px-6 py-4"><input type="text" id="n-artc-agr" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Taille d'échantillon:</td>
                                    <td class="px-6 py-4"><input type="text" id="tlle-ech" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Etat Phytosanitaire:</td>
                                    <td class="px-6 py-4"><input type="text" id="et-pht" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Etat Physique:</td>
                                    <td class="px-6 py-4"><input type="text" id="et-phs" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Etat Visuel:</td>
                                    <td class="px-6 py-4"><input type="text" id="et-vs" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Etat de caisses:</td>
                                    <td class="px-6 py-4"><input type="text" id="et-csse" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Etat de Palettes:</td>
                                    <td class="px-6 py-4"><input type="text" id="et-pal" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Etat de véhicules:</td>
                                    <td class="px-6 py-4"><input type="text" id="et-vhc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                                <tr class="bg-white border-b">
                                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Date Agrégation:</td>
                                    <td class="px-6 py-4"><input type="datetime-local" id="dte-agr" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- Buttons for Réception forms -->
                <div class="flex justify-end gap-4 mb-6">
                    <button class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        Nouveau
                    </button>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        Enregistrer
                    </button>
                    <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors">
                        Annuler
                    </button>
                </div>
            </div>

            <!-- Saisie des factures content section -->
            <div id="saisie-factures-content" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Form: Saisie des factures (reorganized) -->
                    <div class="bg-white p-6 rounded-lg card">
                        <h3 class="text-xl font-bold text-gray-900 mb-4">Saisie des factures</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Each div is a form group for a label and input -->
                            <div>
                                <label for="identifiant-facture" class="block text-sm font-medium text-gray-700 mb-1">Identifiant facture:</label>
                                <input type="text" id="identifiant-facture" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="n-bc-facture" class="block text-sm font-medium text-gray-700 mb-1">N°BC:</label>
                                <input type="number" id="n-bc-facture" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="n-facture-fournisseur" class="block text-sm font-medium text-gray-700 mb-1">N°Facture Fournisseur:</label>
                                <input type="text" id="n-facture-fournisseur" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="montant-facture" class="block text-sm font-medium text-gray-700 mb-1">Montant:</label>
                                <input type="number" id="montant-facture" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="rrr-percent" class="block text-sm font-medium text-gray-700 mb-1">RRR %:</label>
                                <input type="number" id="rrr-percent" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="net-commercial" class="block text-sm font-medium text-gray-700 mb-1">Net commercial:</label>
                                <input type="number" id="net-commercial" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="escompte-percent" class="block text-sm font-medium text-gray-700 mb-1">Escompte %:</label>
                                <input type="number" id="escompte-percent" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="net-financier" class="block text-sm font-medium text-gray-700 mb-1">Net Financier:</label>
                                <input type="number" id="net-financier" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="tva-percent" class="block text-sm font-medium text-gray-700 mb-1">TVA % :</label>
                                <input type="number" id="tva-percent" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="montant-tva" class="block text-sm font-medium text-gray-700 mb-1">Montant TVA :</label>
                                <input type="number" id="montant-tva" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="transport-de" class="block text-sm font-medium text-gray-700 mb-1">Transport de :</label>
                                <input type="text" id="transport-de" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="a-charge-de" class="block text-sm font-medium text-gray-700 mb-1">A charge de :</label>
                                <input type="text" id="a-charge-de" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="paye-par" class="block text-sm font-medium text-gray-700 mb-1">Payé par:</label>
                                <input type="text" id="paye-par" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="port" class="block text-sm font-medium text-gray-700 mb-1">Port:</label>
                                <input type="number" id="port" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="tva-port-percent" class="block text-sm font-medium text-gray-700 mb-1">TVA Port %:</label>
                                <input type="number" id="tva-port-percent" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="montant-tva-port" class="block text-sm font-medium text-gray-700 mb-1">Montant TVA Port:</label>
                                <input type="number" id="montant-tva-port" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="montant-ht" class="block text-sm font-medium text-gray-700 mb-1">Montant HT:</label>
                                <input type="number" id="montant-ht" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="montant-ttc" class="block text-sm font-medium text-gray-700 mb-1">Montant TTC:</label>
                                <input type="number" id="montant-ttc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                            <div>
                                <label for="date-facture" class="block text-sm font-medium text-gray-700 mb-1">Date:</label>
                                <input type="datetime-local" id="date-facture" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5">
                            </div>
                        </div>
                    </div>

                    <!-- Invoice Viewer and Uploader -->
                    <div class="bg-white p-6 rounded-lg card flex flex-col items-center justify-center space-y-4">
                        <h3 class="text-xl font-bold text-gray-900 mb-2">Importer une facture</h3>
                        <label for="invoice-file-input" class="w-full flex justify-center items-center px-4 py-6 text-gray-500 text-center transition-all border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:text-gray-700">
                            <span class="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-upload"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>
                                <span>Cliquez ou glissez-déposez un fichier (PNG, JPG, PDF)</span>
                            </span>
                            <input type="file" id="invoice-file-input" accept="image/*, application/pdf" class="hidden">
                        </label>
                        <!-- Viewer Container -->
                        <div id="invoice-viewer-container" class="w-full h-full bg-gray-50 border border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center overflow-auto relative hidden">
                            <img id="invoice-image-viewer" src="" alt="Invoice Preview" class="max-w-full max-h-full object-contain hidden">
                            <iframe id="invoice-pdf-viewer" src="" class="w-full h-full hidden rounded-lg"></iframe>
                            <div id="placeholder-message" class="text-gray-400 text-center">Aucun fichier sélectionné</div>
                        </div>
                        <button id="remove-file-button" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors hidden">
                            Supprimer le fichier
                        </button>
                    </div>
                </div>
                <!-- Buttons for facture form -->
                <div class="flex justify-end gap-4 mb-6">
                    <button class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        Nouveau
                    </button>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                        Enregistrer
                    </button>
                    <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors">
                        Annuler
                    </button>
                </div>
            </div>

            <!-- Retours content section -->
            <div id="retours-content" class="tab-content hidden">
              <div class="table-group-container grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                  <!-- Form: Bon de retour -->
                  <div class="bg-white p-6 rounded-lg card">
                      <table class="w-full text-sm text-left text-gray-500">
                          <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                              <tr>
                                  <th scope="col" colspan="2" class="px-6 py-3 text-center">Bon de retour</th>
                              </tr>
                          </thead>
                          <tbody>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Bon de retour:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-brp" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5" value="00000"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Agrégation:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-bc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Article:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-frn" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Bon de réception:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-artc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Fournisseur:</td>
                                  <td class="px-6 py-4"><input type="number" id="poids-br" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Quantité retournée:</td>
                                  <td class="px-6 py-4"><input type="number" id="tarre-csse" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Motif de rejet:</td>
                                  <td class="px-6 py-4"><input type="text" id="tlle-ech" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Matricule du véhicule:</td>
                                  <td class="px-6 py-4"><input type="number" id="nbre-csse" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Date de retour:</td>
                                  <td class="px-6 py-4"><input type="datetime-local" id="dte-rcp" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>

                          </tbody>
                      </table>
                  </div>

                  <!-- Form: Facturation des retours -->
                  <div class="bg-white p-6 rounded-lg card">
                      <table class="w-full text-sm text-left text-gray-500">
                          <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                              <tr>
                                  <th scope="col" colspan="2" class="px-6 py-3 text-center">Facturation des retours</th>
                              </tr>
                          </thead>
                          <tbody>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°FactureA:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-bc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">N°Bon de retour:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-bc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">RRR:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-bc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Montant RRR:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-bc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Motif:</td>
                                  <td class="px-6 py-4"><input type="text" id="tlle-ech" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Escompte de remboursement:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-bc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Montant escompte:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-bc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Total réduction:</td>
                                  <td class="px-6 py-4"><input type="number" id="n-bc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                              <tr class="bg-white border-b">
                                  <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Date de retour:</td>
                                  <td class="px-6 py-4"><input type="datetime-local" id="dte-agr" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5"></td>
                              </tr>
                          </tbody>
                      </table>
                  </div>
              </div>
              <!-- Buttons for Retours forms -->
              <div class="flex justify-end gap-4 mb-6">
                  <button class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                      Nouveau
                  </button>
                  <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                      Enregistrer
                  </button>
                  <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors">
                      Annuler
                  </button>
              </div>
            </div>
        </div>

        <!-- THE LISTES SECTION - This now dynamically changes its content based on the active main tab -->
        <hr class="my-8 border-t border-gray-300" />
        <h2 class="text-3xl font-bold text-gray-900 mb-4" id="listes-title">Listes</h2>

        <div id="lists-container">
            <!-- This container will hold the appropriate lists for the active main tab -->

            <!-- Lists for "Saisie des Réceptions" -->
            <div id="saisie-reception-lists-content" class="list-content">
                <nav class="bg-white p-4 rounded-lg card mb-6">
                    <ul class="flex space-x-4">
                        <li><a href="#receptions-list" id="receptions-list-tab" class="bottom-tab-link text-gray-900 font-medium hover:text-green-600 border-b-2 border-green-500">Liste des Réceptions</a></li>
                        <li><a href="#agregations-list" id="agregations-list-tab" class="bottom-tab-link text-gray-500 hover:text-gray-900 border-b-2 border-transparent">Liste des Agrégations</a></li>
                    </ul>
                </nav>

                <div id="receptions-list-table" class="bottom-tab-table active-table">
                    <!-- Main table of receptions -->
                    <div class="bg-white p-6 rounded-lg card">
                        <div class="relative overflow-x-auto rounded-lg">
                            <table class="w-full text-sm text-left text-gray-500">
                                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">N°BC</th>
                                        <th scope="col" class="px-6 py-3">Date Réception</th>
                                        <th scope="col" class="px-6 py-3">N°Réception</th>
                                        <th scope="col" class="px-6 py-3">N°Fournisseur</th>
                                        <th scope="col" class="px-6 py-3">Nom Fournisseur</th>
                                        <th scope="col" class="px-6 py-3">N°Article</th>
                                        <th scope="col" class="px-6 py-3">Nom Artilce</th>
                                        <th scope="col" class="px-6 py-3">Poids Brut</th>
                                        <th scope="col" class="px-6 py-3">Poids Net</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="bg-white border-b hover:bg-gray-50">
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="agregations-list-table" class="bottom-tab-table hidden">
                    <!-- Main table of agrégations -->
                    <div class="bg-white p-6 rounded-lg card">
                        <div class="relative overflow-x-auto rounded-lg">
                            <table class="w-full text-sm text-left text-gray-500">
                                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">Date</th>
                                        <th scope="col" class="px-6 py-3">N°Agrégation</th>
                                        <th scope="col" class="px-6 py-3">N°Réception</th>
                                        <th scope="col" class="px-6 py-3">N°Fournisseur</th>
                                        <th scope="col" class="px-6 py-3">Nom Fournisseur</th>
                                        <th scope="col" class="px-6 py-3">N°Article</th>
                                        <th scope="col" class="px-6 py-3">Nom Article</th>
                                        <th scope="col" class="px-6 py-3">Quantité Agrée</th>
                                        <th scope="col" class="px-6 py-3">Avis</th>
                                        <th scope="col" class="px-6 py-3">Situation</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="bg-white border-b hover:bg-gray-50">
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                        <td class="px-6 py-4">...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lists for "Saisie des factures" -->
            <div id="saisie-factures-lists-content" class="list-content hidden">
                <div class="bg-white p-6 rounded-lg card mt-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Liste des factures</h3>
                    <div class="relative overflow-x-auto rounded-lg">
                        <table class="w-full text-sm text-left text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th scope="col" colspan="2" class="px-6 py-3 text-center"></th>
                                    <th scope="col" colspan="3" class="px-6 py-3 text-center">Client/Fournisseur</th>
                                    <th scope="col" colspan="1" class="px-6 py-3 text-center"></th>
                                    <th scope="col" colspan="5" class="px-6 py-3 text-center">Réductions</th>
                                    <th scope="col" colspan="1" class="px-6 py-3 text-center">Majorations</th>
                                    <th scope="col" colspan="2" class="px-6 py-3 text-center">Change</th>
                                    <th scope="col" colspan="3" class="px-6 py-3 text-center">Autres</th>
                                </tr>
                                <tr>
                                    <th scope="col" class="px-6 py-3">Date</th>
                                    <th scope="col" class="px-6 py-3">N°Réception</th>
                                    <th scope="col" class="px-6 py-3">Identifiant</th>
                                    <th scope="col" class="px-6 py-3">N°Facture Fournisseur</th>
                                    <th scope="col" class="px-6 py-3">Type</th>
                                    <th scope="col" class="px-6 py-3">Num</th>
                                    <th scope="col" class="px-6 py-3">Nom</th>
                                    <th scope="col" class="px-6 py-3">Montant</th>
                                    <th scope="col" class="px-6 py-3">RRR</th>
                                    <th scope="col" class="px-6 py-3">Net commercial</th>
                                    <th scope="col" class="px-6 py-3">Escompte</th>
                                    <th scope="col" class="px-6 py-3">Net Financier</th>
                                    <th scope="col" class="px-6 py-3">TVA</th>
                                    <th scope="col" class="px-6 py-3">Port</th>
                                    <th scope="col" class="px-6 py-3">TVA Port</th>
                                    <th scope="col" class="px-6 py-3">Montant TTC</th>
                                    <th scope="col" class="px-6 py-3">Échéance</th>
                                    <th scope="col" class="px-6 py-3">Transport de</th>
                                    <th scope="col" class="px-6 py-3">A charge de</th>
                                    <th scope="col" class="px-6 py-3">Payé Par</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-white border-b hover:bg-gray-50">
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                    <td class="px-6 py-4">...</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr class="bg-gray-50 font-bold text-gray-900">
                                    <td class="px-6 py-4" colspan="7">Total</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                    <td class="px-6 py-4" colspan="1">-</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <!-- This empty div is for the 'Retours' tab, where no lists should be shown -->
            <div id="retours-lists-content" class="list-content hidden">
              <div class="bg-white p-6 rounded-lg card mt-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Liste retours</h3>
                <div class="relative overflow-x-auto rounded-lg">
                    <table class="w-full text-sm text-left text-gray-500">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3">Date</th>
                                <th scope="col" class="px-6 py-3">N°Bon de retour</th>
                                <th scope="col" class="px-6 py-3">N°Réception</th>
                                <th scope="col" class="px-6 py-3">N°Fournisseur</th>
                                <th scope="col" class="px-6 py-3">Nom Fournisseur</th>
                                <th scope="col" class="px-6 py-3">N°Article</th>
                                <th scope="col" class="px-6 py-3">Nom Article</th>
                                <th scope="col" class="px-6 py-3">N°Agrégation</th>
                                <th scope="col" class="px-6 py-3">Quantité retournée (kg)</th>
                                <th scope="col" class="px-6 py-3">Montant</th>
                                <th scope="col" class="px-6 py-3">RRR</th>
                                <th scope="col" class="px-6 py-3">Escompte de remboursement</th>
                                <th scope="col" class="px-6 py-3">Montant Escompte</th>
                                <th scope="col" class="px-6 py-3">Motif</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                                <td class="px-6 py-4">...</td>
                            </tr>
                            <tr class="bg-white border-b hover:bg-gray-50">
                                <td class="px-6 py-4" colspan="14">Les factures avoirs completes sont affichées sur "Saisie Factures"</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
              </div>

             </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // A helper function to manage tab states
            function activateTab(tabs, contents, activeTabLink, activeContent, hideListTitle = false) {
                tabs.forEach(t => {
                    t.classList.remove('border-green-500', 'text-gray-900', 'font-medium');
                    t.classList.add('border-transparent', 'text-gray-500');
                });
                activeTabLink.classList.add('border-green-500', 'text-gray-900', 'font-medium');
                activeTabLink.classList.remove('border-transparent', 'text-gray-500');

                contents.forEach(content => content.classList.add('hidden'));
                if (activeContent) {
                    activeContent.classList.remove('hidden');
                }

                const listesTitle = document.getElementById('listes-title');
                if (hideListTitle) {
                    listesTitle.classList.add('hidden');
                } else {
                    listesTitle.classList.remove('hidden');
                }
            }

            function setupTopTabs() {
                const topTabs = document.querySelectorAll('.top-tab-link');
                const mainContents = document.querySelectorAll('.tab-content');
                const listContents = document.querySelectorAll('.list-content');

                topTabs.forEach(tab => {
                    tab.addEventListener('click', function(e) {
                        e.preventDefault();
                        const mainContentId = this.getAttribute('href').substring(1) + '-content';
                        const listContentId = this.getAttribute('href').substring(1) + '-lists-content';

                        const activeMainContent = document.getElementById(mainContentId);
                        const activeListContent = document.getElementById(listContentId);

                        const hideListTitle = !activeListContent || activeListContent.children.length === 0;
                        activateTab(topTabs, mainContents, this, activeMainContent, hideListTitle);
                        activateTab(topTabs, listContents, this, activeListContent);

                        // Special handling for the bottom tabs within 'Saisie des Réceptions'
                        if (mainContentId === 'saisie-reception-content') {
                            const receptionsListTab = document.getElementById('receptions-list-tab');
                            if(receptionsListTab) {
                                receptionsListTab.click();
                            }
                        }
                    });
                });
            }

            function setupBottomTabs() {
                const bottomTabs = document.querySelectorAll('.bottom-tab-link');
                const bottomTables = document.querySelectorAll('.bottom-tab-table');

                bottomTabs.forEach(tab => {
                    tab.addEventListener('click', function(e) {
                        e.preventDefault();

                        bottomTabs.forEach(t => {
                            t.classList.remove('border-green-500', 'text-gray-900', 'font-medium');
                            t.classList.add('border-transparent', 'text-gray-500');
                        });
                        this.classList.add('border-green-500', 'text-gray-900', 'font-medium');
                        this.classList.remove('border-transparent', 'text-gray-500');

                        bottomTables.forEach(table => {
                            table.classList.add('hidden');
                        });

                        const targetId = this.getAttribute('href').substring(1) + '-table';
                        const targetTable = document.getElementById(targetId);
                        if (targetTable) {
                            targetTable.classList.remove('hidden');
                        }
                    });
                });
            }

            function setupInvoiceUploader() {
                const fileInput = document.getElementById('invoice-file-input');
                const viewerContainer = document.getElementById('invoice-viewer-container');
                const imageViewer = document.getElementById('invoice-image-viewer');
                const pdfViewer = document.getElementById('invoice-pdf-viewer');
                const removeButton = document.getElementById('remove-file-button');
                const placeholder = document.getElementById('placeholder-message');

                fileInput.addEventListener('change', function() {
                    const file = this.files[0];
                    if (file) {
                        const fileURL = URL.createObjectURL(file);
                        viewerContainer.classList.remove('hidden');
                        removeButton.classList.remove('hidden');
                        placeholder.classList.add('hidden');

                        if (file.type.startsWith('image/')) {
                            imageViewer.src = fileURL;
                            imageViewer.classList.remove('hidden');
                            pdfViewer.classList.add('hidden');
                        } else if (file.type === 'application/pdf') {
                            pdfViewer.src = fileURL;
                            pdfViewer.classList.remove('hidden');
                            imageViewer.classList.add('hidden');
                        } else {
                            // Handle unsupported file types if needed
                            alert('Format de fichier non pris en charge. Veuillez sélectionner une image ou un PDF.');
                            removeFile();
                        }
                    }
                });

                removeButton.addEventListener('click', removeFile);

                function removeFile() {
                    fileInput.value = ''; // Clear the file input
                    imageViewer.src = '';
                    pdfViewer.src = '';
                    viewerContainer.classList.add('hidden');
                    removeButton.classList.add('hidden');
                    placeholder.classList.remove('hidden');
                    // Revoke the object URL to free up memory
                    if (imageViewer.src) URL.revokeObjectURL(imageViewer.src);
                    if (pdfViewer.src) URL.revokeObjectURL(pdfViewer.src);
                }
            }

            setupTopTabs();
            setupBottomTabs();
            setupInvoiceUploader();

            // Initial state: click the first tab to set everything up
            document.getElementById('saisie-reception-tab').click();
        });
    </script>
</body>
</html>
